<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    @import url('https://fonts.cdnfonts.com/css/amazon-ember');
  </style>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
    integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link href="../css/reset.css" rel="stylesheet" />
  <link href="../css/nav-style.css" rel="stylesheet" />
  <link rel="stylesheet" href="../css/product-details.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <title>Document</title>
</head>

<body>
  <!--  Start Nav Bar-->
  <section id="nav-global" class="">
    <div class="d-flex d-lg-none align-items-center justify-content-between" id="navTitle"
      style="background-color: #232f3e; height: 3.5rem;">
      <div id="navTitleLeft">
        <div class="" id="navTitleLogo">
          <a href="">
            <img class="" alt="logo" src="../img/logo.png" style="width: 8rem;">
            <span>.eg</span>
          </a>
        </div>
      </div>
      <div id="navTitleRight" class="d-flex justify-content-center align-items-center">
        <a href="pages/auth.html">
          <div class="d-flex align-items-center">
            <span class="m-1">Sign in</span>
            <i class="fa-solid fa-angle-right"></i>
            <i class="m-1" style="background-image: url(../img/image.png);
          background-size: 275px;
          background-position: -141px -300px;
          width: 35px;
          height: 27px;"></i>
          </div>
        </a>

        <a href="../pages/cart.html">
          <div class="" id="cart-container">
            <img alt="cart" class="logo" src="../img/cart-icon.png">
            <span>5</span>
          </div>
        </a>

      </div>
    </div>
    <div id="nav-top" class="">
      <div class="d-none d-lg-flex" id="nav-top-left-group">
        <div class="hover-border" id="logo-container">
          <a href="">
            <img alt="logo" class="logo" src="../img/logo.png">
            <span>.eg</span>
          </a>
        </div>
        <a href="" style="text-decoration: none;">
          <div class="hover-border" id="delivery-container">
            <img alt="logo" class="logo" src="../img/location-icon.png">
            <div>
              <span>Deliver To<br></span>
              <span>Egypt</span>
            </div>
          </div>
        </a>
      </div>
      <div id="nav-fill">
        <div id="nav-search-container">
          <div id="nav-search-left">
            <button class="hover-mask" id="nav-search-category-btn">All</button>
          </div>
          <div id="nav-search-fill">
            <input id="nav-search-input" type="text" name="q" />
            <input type="submit" style="visibility: hidden;" />
          </div>
          <div class="hover-mask" id="nav-search-right">
            <img alt="" src="../img/search-icon.png">
          </div>
        </div>
      </div>
      <div id="nav-top-right-group" class="d-none d-lg-flex">
        <a href="">
          <div id="sign-in-container" class="hover-border">
            <span>Hello, Sign in </br></span>
            <span>Account and Lists</span>
          </div>
        </a>
        <a href="../pages/cart.html">
          <div class="hover-border" id="cart-container">
            <img alt="cart" class="logo" src="../img/cart-icon.png">
            <span>5</span>
          </div>
        </a>
      </div>

    </div>
    <div id="nav-bottom" class="overflow-x-scroll overflow-y-hidden" style="scrollbar-width: none; ">
      <div id="nav-bottom-left" class="ms-2">
        <a href="" class="nav-a">
          Mobile Phones
        </a>
        <a href="" class="nav-a">
          Electronics
        </a>
        <a href="" class="nav-a">
          Fashion
        </a>
        <a href="" class="nav-a">
          Video Games
        </a>
        <a href="" class="nav-a">
          Home
        </a>
        <a href="" class="nav-a">
          Grocery
        </a>
        <a href="" class="nav-a">
          Mobile Phones
        </a>
        <a href="" class="nav-a">
          Electronics
        </a>
        <a href="" class="nav-a">
          Fashion
        </a>
        <a href="" class="nav-a">
          Video Games
        </a>
        <a href="" class="nav-a">
          Home
        </a>
        <a href="" class="nav-a">
          Grocery
        </a>
      </div>
      <div id="nav-bottom-right" class="d-none d-md-flex">
        <img src="../img/nav-bottom-ad.jpg" style="height: 100%">
      </div>
    </div>

  </section>
  <!--End Nav Bar-->

  <div class="container-fluid">
    <div class="row">
      <div class="col-4 offset-1 pt-3">
        <div id="zoomContainer">
          <div class="pictures">
            <img id="pic1" class="pic" onclick="changeImage(0)" src="../img/product-img.jpg">
            <img id="pic2" class="pic" onclick="changeImage(1)" src="../img/image2.jpg">
            
          </div>
          <div class="picture" id="picture">
            <div class="rect" id="rect"></div>
            <img id="pic" class="w-100" src="../img/product-img.jpg">
          </div>
          
        </div>
      </div>
      <div class="col-4 position-relative bg-danger">
        Lorem ipsum dolor sit amet consectetur adipisicing elit. Obcaecati iste, ullam perspiciatis quis, cum beatae et blanditiis molestiae quia officia labore tenetur saepe possimus, modi sed eos? Nostrum, assumenda et!
        Minus aut nobis architecto eum doloribus! Harum aliquid iusto ducimus sequi nemo laboriosam nesciunt placeat repudiandae tempore nulla! Dolor, architecto dolorem reiciendis voluptatem vel nostrum cum doloribus natus sed itaque.
        Nulla sunt corrupti, repellendus vero doloremque magnam. Voluptatibus placeat aut veniam omnis ad sequi accusantium voluptatem, ex maxime accusamus magni ducimus repellat deserunt quam! Quod labore deserunt maiores totam iure.
        <div class="zoom" id="zoom"></div>
      </div>
    </div>
  </div>

  <script>

    
    // main picture
    var picture = document.querySelector('#pic');

    // Main picture container
    var mainContainer = document.querySelector('#picture');

    // selector
    var rect = document.querySelector("#rect");

    // Zoom window
    var zoom = document.querySelector('#zoom');

    // list of pictures 
    picList = document.querySelectorAll(".pic");
    console.log(picList);

    // Active side picture
    let picActive = 0;

    // Add a boxshodow to the first piture (Current active picture)
    picList[picActive].classList.add('img-active');
    

    // Width and height of main picture in px
    let w1 = $("#pic").width();
    let h1 = $("#pic").height();
    // changeImage(picActive)
    // change image 
    function changeImage(n) {
      
      let imgSrc = picList[n].getAttribute("src");
      // This will change the main image
      picture.src = imgSrc;
      // This will change the background image of the zoom window
      zoom.style.backgroundImage = "url(" + imgSrc + ")";
      // removing box shodow from the previous active side picture
      picList[picActive].classList.remove('img-active');
      // Add box shodow to active side picture
      picList[n].classList.add('img-active');
      // update the active side picture 
      picActive = n;

      w1 = $("#pic").width();
      h1 = $("#pic").height();
      console.log("width - " + w1 + " height - " + h1);
      zoom.style.backgroundSize = w1 * ratio + 'px ' + h1 * ratio + 'px';
    }


    


    // Zoom ratio
    let ratio = 3;

    // Zoom window background-image size
    

    // Coordinates of mouse cursor
    let x, y, xx, yy;

    // Width and height of selector
    let w2 = rect.offsetWidth;
    let h2 = rect.offsetHeight;

    // zoom window width and height
    zoom.style.width = w2 * ratio + 'px';
    zoom.style.height = h2 * ratio + 'px';

    // half of selector shows outside the main picture
    // We need half of width and height
    w2 = w2 / 2;
    h2 = h2 / 2;
    // moving the selector box 
    function move(event) {
      // How far is the mouse cursor from an element
      // x how far the cursor from left of element
      x = event.offsetX;
      // y how far the cursor from the top of an element
      y = event.offsetY;

      xx = x - w2;
      yy = y - h2;
      // Keeping the selector inside the main picture
      // left of picture
      if (x < w2) {
        x = w2;
        // matching the zoom window with the selector
        xx = 0;
      }
      // right of main picture
      if (x > w1 - w2) {
        x = w1 - w2;
        xx = x - w2;
      }
      // top of main picture 
      if (y < h2) {
        y = h2;
        yy = 0;
      }
      // bottom of main picture
      if (y > h1 - h2) {
        y = h1 - h2;
        yy = y - h2;
      }

      // changing the position of the selector
      rect.style.left = x + 'px';
      rect.style.top = y + 'px';
      // changing background image of zoom window
      zoom.style.backgroundPosition = '-' + xx * ratio + 'px ' + '-' + yy * ratio + 'px';
    }

    picture.addEventListener('mousemove', function (event) {
      move(event);
      addOpacity();
    })

    // show selector
    // show zoom window
    function addOpacity() {
      rect.classList.add('rect-active');
      zoom.classList.add('rect-active');
    }

    // Hide the zoom window 
    function removeOpacity() {
      rect.classList.remove('rect-active');
      zoom.classList.remove('rect-active');
    }

    picture.addEventListener('mouseout', function () {
      removeOpacity();
    })
    document.addEventListener('DOMContentLoaded', ()=>{
      w1 = $("#pic").width();
      h1 = $("#pic").height();
      changeImage(picActive);
    })
  </script>

  <script src="../js/nav_bar.js"></script>
</body>

</html>